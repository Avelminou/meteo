<!DOCTYPE html>
<html lang="fr">
<head>
   <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Application météo simple</title>
  <meta name="description" content="Consultez la météo actuelle de votre ville avec cette application météo simple, rapide et gratuite." />
  <meta name="keywords" content="météo, météo gratuite, prévisions météo, météo ville" />
  <meta name="author" content="Avelminou" />

  <!-- Icône de l’onglet -->
  <link rel="icon" href="favicon.png" type="image/png" />

  <!-- Réseaux sociaux -->
  <meta property="og:title" content="Application météo simple" />
  <meta property="og:description" content="Affichez la météo de votre ville en temps réel." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://avelminou.github.io/meteo/" />
</head>
<body>
   <h1>Météo en temps réel par ville</h1>
  <p>Entrez une ville pour connaître la température, la météo actuelle et les prévisions.</p>
  
  <input type="text" id="ville" placeholder="Entrez une ville" />
  <button onclick="chercherPrevision()">Rechercher</button>
  
  <div id="resultat"></div>

  <script>
    async function chercherPrevision() {
    const ville = document.getElementById('ville').value;
    const apiKey = "85b494c5f127df88c974bf66f7c4c67f"; // ← remplace par ta clé API
    const url = `https://api.openweathermap.org/data/2.5/forecast?q=${ville}&units=metric&lang=fr&appid=${apiKey}`;

    try {
      const reponse = await fetch(url);
      if (!reponse.ok) throw new Error("Ville introuvable");

      const data = await reponse.json();

      // Filtrer une prévision par jour (autour de 12h)
      const previsionsParJour = [];
      const dejaAjoutes = new Set();

      for (let point of data.list) {
        const date = new Date(point.dt_txt);
        const heure = date.getHours();

        // On prend 12h ou 13h
        if ((heure === 12 || heure === 13) && !dejaAjoutes.has(date.toDateString())) {
          dejaAjoutes.add(date.toDateString());
          previsionsParJour.push(point);
        }
      }

      // Générer HTML
      let html = `<h2>Prévisions 5 jours pour ${data.city.name}</h2>`;
      html += `<div style="display:flex; gap:15px;">`;

      previsionsParJour.forEach(prevision => {
        const date = new Date(prevision.dt_txt);
        const icone = prevision.weather[0].icon;
        const iconeURL = `https://openweathermap.org/img/wn/${icone}@2x.png`;
        html += `
          <div style="border:1px solid #ccc; border-radius:10px; padding:10px; text-align:center;">
            <p><strong>${date.toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'short' })}</strong></p>
            <img src="${iconeURL}" alt="${prevision.weather[0].description}" />
            <p>${prevision.main.temp.toFixed(1)}°C</p>
            <p>${prevision.weather[0].description}</p>
          </div>
        `;
      });

      html += `</div>`;
      document.getElementById('resultat').innerHTML = html;

    } catch (erreur) {
      document.getElementById('resultat').innerHTML = `<p style="color:red;">Erreur : ${erreur.message}</p>`;
    }
  }

  </script>
</body>
</html>
